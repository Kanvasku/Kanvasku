/** kanvasku.js - Muhammad Rifqi Priyo Susanto (srifqi) dan kontributor */
var Kanvasku={REVISI:1,daftarSkrip:[],sudut:function(a){var c=/(.+) *(derajat|radian)/i.exec(a.toLowerCase());a=c[1];return"derajat"===c[2]?a*Math.PI/180:a},beritahuKesalahan:function(a){throw Error('perintah "'+a+'" tidak diketahui atau tidak tepat.');},prosesSkrip:function(a,c){for(var b=a.split("\n"),d="",f=0;f<b.length;f++)if(!/^\s*$/i.test(b[f])){var g=b[f].replace(/^\s*|\s*$/,"");if(!/^#/.test(g)){for(var k=!1,e=0;e<Kanvasku.daftarPerintah.length;e++)!0===Kanvasku.daftarPerintah[e][0].test(g)&&(k=!0,d+=Kanvasku.daftarPerintah[e][1](Kanvasku.daftarPerintah[e][0].exec(g)));!1===k&&Kanvasku.beritahuKesalahan(g)}}c&&eval(d);return d},prosesSemuaSkrip:function(){for(var a=0;a<Kanvasku.daftarSkrip.length;a++)Kanvasku.prosesSkrip(Kanvasku.daftarSkrip[a].innerText,!0)},daftarPerintah:[[/gunakan kanvas #(.+)/i,function(a){return"var b=document.getElementById('"+a[1]+"');"}],[/siapkan kanvas/i,function(a){return"var c=b.getContext('2d');"}],[/atur (.+)/i,function(a){var c=a[1],b={fillStyle:/warna isian (.+)/i,font:/font (.+)/i,globalAlpha:/alfa global (.+)/i,globalCompositeOperation:/operasi komposit global (.+)/i,lineCap:/akhir garis (.+)/i,lineDashOffset:/pergeseran garis putus (.+)/i,lineJoin:/sambungan garis (.+)/i,lineWidth:/lebar garis (.+)/i,miterLimit:/batas siku (.+)/i,resetTransform:/ulang transformasi kanvas/i,setLineDash:/garis putus (.+)/i,shadowBlur:/kekaburan bayangan (.+)/i,shadowColor:/warna bayangan (.+)/i,shadowOffsetX:/pergeseran X bayangan (.+)/i,shadowOffsetY:/pergeseran Y bayangan (.+)/i,strokeStyle:/warna goresan (.+)/i,textAlign:/perataan teks (.+)/i,textBaseline:/alas teks (.+)/i,widthheight:/ukuran kanvas (.+) (.+)/i},d=["butt","round","square"],f=["pangkal","bulat","persegi"],g=["bevel","round","miter"],k=["segitiga","bulat","persegi"],e=["left","right","center","start","end"],l=["kiri","kanan","tengah","mulai","akhir"],m="top hanging middle alphabetic ideographic bottom".split(" "),n="atas menggantung tengah abjad ideografis bawah".split(" "),h;for(h in b)if(!0===b[h].test(c))switch(a=b[h].exec(c)[1],c=b[h].exec(c)[2],h){case "fillStyle":case "font":case "shadowColor":case "strokeStyle":return"c."+h+"='"+a+"';";case "resetTransform":return"c.resetTransform();";case "globalCompositeOperation":return"c.globalCompositeOperation='"+a+"';";case "lineCap":return a=0>d.indexOf(a)?0>f.indexOf(a)?a:d[f.indexOf(a)]:a,"c.lineCap='"+a+"';";case "lineJoin":return a=0>g.indexOf(a)?0>k.indexOf(a)?a:g[k.indexOf(a)]:a,"c.lineJoin='"+a+"';";case "textAlign":return a=0>e.indexOf(a)?0>l.indexOf(a)?a:e[l.indexOf(a)]:a,"c.textAlign='"+a+"';";case "textBaseline":return a=0>m.indexOf(a)?0>n.indexOf(a)?a:m[n.indexOf(a)]:a,"c.textBaseline='"+a+"';";case "setLineDash":return"c.setLineDash(["+a.split(/ +/)+"]);";case "widthheight":return"c.width="+a+";c.height="+c+";";default:return"c."+h+"="+a+";"}Kanvasku.beritahuKesalahan(a[0]);return""}],[/bersihkan( segi empat)? (.+) (.+) (.+) (.+)/i,function(a){return"c.clearRect("+a[2]+","+a[3]+","+a[4]+","+a[5]+");"}],[/isi( (.+)|$)/i,function(a){var c=a[2],b=/segi empat (.+) (.+) (.+) (.+)/i,d=/teks (".+") (.+) (.+)/i;if(""===a[1])return"c.fill();";if(!0===b.test(c))return a=b.exec(c),"c.fillRect("+a[1]+","+a[2]+","+a[3]+","+a[4]+");";if(!0===d.test(c))return a=d.exec(c),"c.fillText("+a[1]+","+a[2]+","+a[3]+");";Kanvasku.beritahuKesalahan(a[0]);return""}],[/gores( (.+)|$)/i,function(a){var c=a[2],b=/segi empat (.+) (.+) (.+) (.+)/i,d=/teks (".+") (.+) (.+)/i;if(""===a[1])return"c.stroke();";if(!0===b.test(c))return a=b.exec(c),"c.strokeRect("+a[1]+","+a[2]+","+a[3]+","+a[4]+");";if(!0===d.test(c))return a=d.exec(c),"c.strokeText("+a[1]+","+a[2]+","+a[3]+");";Kanvasku.beritahuKesalahan(a[0]);return""}],[/(mulai|tutup) garis/i,function(a){a=a[1];if("mulai"===a)return"c.beginPath();";if("tutup"===a)return"c.closePath();"}],[/garis (lingkaran|elips|segi empat) (.+)/i,function(a){var c=a[1],b=a[2];if("lingkaran"===c){if(/(.+) (.+) (.+) (.+) (.+)/i.test(b))return a=/(.+) (.+) (.+) (.+) (.+)/i.exec(b),"c.arc("+a[1]+","+a[2]+","+a[3]+","+Kanvasku.sudut(a[4])+","+Kanvasku.sudut(a[5])+");";Kanvasku.beritahuKesalahan(a[0])}else if("elips"===c){if(/(.+) (.+) (.+) (.+) (.+) (.+) (.+)/i.test(b))return a=/(.+) (.+) (.+) (.+) (.+) (.+) (.+)/i.exec(b),"c.ellipse("+a[1]+","+a[2]+","+a[3]+","+a[4]+","+Kanvasku.sudut(a[5])+","+Kanvasku.sudut(a[6])+","+Kanvasku.sudut(a[7])+");";Kanvasku.beritahuKesalahan(a[0])}else if("segi empat"===c){if(/(.+) (.+) (.+) (.+)/i.test(b))return a=/(.+) (.+) (.+) (.+)/i.exec(b),"c.rect("+a[1]+","+a[2]+","+a[3]+","+a[4]+");";Kanvasku.beritahuKesalahan(a[0])}}],[/(garis busur|geser|garis|kurva Bezier|kurva kuadrat) ke (.+)$/i,function(a){var c=a[1].toLowerCase(),b=a[2];if("garis busur"===c){if(/(.+) (.+) (.+) (.+) (.+)/i.test(b))return a=/(.+) (.+) (.+) (.+) (.+)/i.exec(b),"c.arcTo("+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+");";Kanvasku.beritahuKesalahan(a)}else if("geser"===c){if(/(.+) (.+)/i.test(b))return a=/(.+) (.+)/i.exec(b),"c.moveTo("+a[1]+","+a[2]+");";Kanvasku.beritahuKesalahan(a[0])}else if("garis"===c){if(/(.+) (.+)/i.test(b))return a=/(.+) (.+)/i.exec(b),"c.lineTo("+a[1]+","+a[2]+");";Kanvasku.beritahuKesalahan(a[0])}else if("kurva bezier"===c){if(/(.+) (.+) (.+) (.+) (.+) (.+)/i.test(b))return a=/(.+) (.+) (.+) (.+) (.+) (.+)/i.exec(b),"c.bezierCurveTo("+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+","+a[6]+");";Kanvasku.beritahuKesalahan(a[0])}else if("kurva kuadrat"===c){if(/(.+) (.+) (.+) (.+)/i.test(b))return a=/(.+) (.+) (.+) (.+)/i.exec(b),"c.quadraticCurveTo("+a[1]+","+a[2]+","+a[3]+","+a[4]+");";Kanvasku.beritahuKesalahan(a[0])}}],[/(putar|skala|geser) kanvas (.+)$/i,function(a){var c=a[1].toLowerCase(),b=a[2];if("putar"===c){if(/(.+) (derajat|radian)/i.test(b))return"c.rotate("+Kanvasku.sudut(b)+");";Kanvasku.beritahuKesalahan(a[0])}else if("skala"===c){if(/(.+) (.+)/i.test(b))return a=/(.+) (.+)/i.exec(b),"c.scale("+a[1]+","+a[2]+");";Kanvasku.beritahuKesalahan(a[0])}else if("geser"===c){if(/(.+) (.+)/i.test(b))return a=/(.+) (.+)/i.exec(b),"c.translate("+a[1]+","+a[2]+");";Kanvasku.beritahuKesalahan(a[0])}}],[/(simpan|muat) pengaturan$/i,function(a){a=a[1].toLowerCase();if("simpan"===a)return"c.save();";if("muat"===a)return"c.restore();"}]]};window.addEventListener("load",function(){for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var b=a[c];/te(ks|xt)\/kanvasku/i.test(b.type)&&Kanvasku.daftarSkrip.push(b)}Kanvasku.prosesSemuaSkrip()});